@page "/demo/list"
@using Frontend.Components.Base.Forms.PageWithCommandBar
@using Frontend.Modules.Categoria
@using Shared.Models.Entities
@inject CategoriaService CategoriaService

<PageTitle>Demo Lista</PageTitle>

<PageWithCommandBar NewPath="/demo/form">
    
    <div style="margin-bottom: 20px;">
        <h1>üìã Demo Lista - Categor√≠as</h1>
        <p>Lista real de categor√≠as usando CategoriaService y RadzenDataGrid</p>
    </div>

    @if (isLoading)
    {
        <div style="text-align: center; padding: 40px;">
            <p>Cargando categor√≠as...</p>
        </div>
    }
    else if (categorias != null && categorias.Any())
    {
        <RadzenDataGrid @ref="grid" 
                        Data="@categorias" 
                        TItem="Categoria"
                        AllowFiltering="true" 
                        AllowSorting="true"
                        Style="margin-bottom: 20px;">
            
            <Columns>
                <RadzenDataGridColumn TItem="Categoria" Property="Nombre" Title="Nombre" Width="300px">
                    <Template Context="categoria">
                        <strong>@categoria.Nombre</strong>
                    </Template>
                </RadzenDataGridColumn>
                
                <RadzenDataGridColumn TItem="Categoria" Property="Descripcion" Title="Descripci√≥n">
                    <Template Context="categoria">
                        @categoria.Descripcion
                    </Template>
                </RadzenDataGridColumn>
            </Columns>
        </RadzenDataGrid>
    }
    else
    {
        <div style="text-align: center; padding: 40px; background: #f8f9fa; border-radius: 4px;">
            <p>No se encontraron categor√≠as</p>
        </div>
    }

    @if (!string.IsNullOrEmpty(errorMessage))
    {
        <div style="padding: 12px; background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 4px; color: #721c24; margin-bottom: 16px;">
            <strong>‚ùå Error:</strong> @errorMessage
        </div>
    }

    <div style="padding: 16px; background: #e3f2fd; border-radius: 4px;">
        <h4>‚ÑπÔ∏è Informaci√≥n</h4>
        <ul>
            <li><strong>Total categor√≠as:</strong> @(categorias?.Count ?? 0)</li>
            <li><strong>‚Üê Atr√°s:</strong> Navegaci√≥n con history.back()</li>
            <li><strong>‚ûï Nuevo:</strong> Va a /demo/form</li>
        </ul>
    </div>

</PageWithCommandBar>
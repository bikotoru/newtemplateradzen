@page "/demo/list"
@using Frontend.Components.Base.Forms.PageWithCommandBar
@using Frontend.Modules.Categoria
@using Shared.Models.Entities
@inject CategoriaService CategoriaService

<PageTitle>Demo Lista</PageTitle>

<PageWithCommandBar NewPath="/demo/form">
    
    <div style="margin-bottom: 20px;">
        <h1>üìã Demo Lista - Categor√≠as</h1>
        <p>Lista real de categor√≠as usando CategoriaService y RadzenDataGrid</p>
    </div>

    <RadzenDataGrid @ref="grid" 
                    Data="@categorias"
                    TItem="Categoria"
                    LoadData="@LoadData"
                    AllowFiltering="true" 
                    AllowSorting="true"
                    AllowPaging="true"
                    PageSize="10"
                    PagerHorizontalAlign="HorizontalAlign.Left"
                    ShowPagingSummary="true"
                    IsLoading="@isLoading"
                    Count="@count"
                    Style="margin-bottom: 20px;">
        
        <Columns>
            <RadzenDataGridColumn TItem="Categoria" Property="Nombre" Title="Nombre" Width="300px" Filterable="true" Sortable="true">
                <Template Context="categoria">
                    <strong>@categoria.Nombre</strong>
                </Template>
            </RadzenDataGridColumn>
            
            <RadzenDataGridColumn TItem="Categoria" Property="Descripcion" Title="Descripci√≥n" Filterable="true" Sortable="true">
                <Template Context="categoria">
                    @categoria.Descripcion
                </Template>
            </RadzenDataGridColumn>
        </Columns>
    </RadzenDataGrid>

    @if (!string.IsNullOrEmpty(errorMessage))
    {
        <div style="padding: 12px; background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 4px; color: #721c24; margin-bottom: 16px;">
            <strong>‚ùå Error:</strong> @errorMessage
        </div>
    }

    <div style="padding: 16px; background: #e3f2fd; border-radius: 4px;">
        <h4>‚ÑπÔ∏è Informaci√≥n</h4>
        <ul>
            <li><strong>Total categor√≠as:</strong> @count</li>
            <li><strong>‚Üê Atr√°s:</strong> Navegaci√≥n con history.back()</li>
            <li><strong>‚ûï Nuevo:</strong> Va a /demo/form</li>
        </ul>
        <p><strong>üîç Funcionalidades:</strong> Filtros, ordenamiento y paginaci√≥n autom√°ticos</p>
    </div>

</PageWithCommandBar>
@page "/categoria/list"
@using Frontend.Components.Base.Forms.PageWithCommandBar
@using Frontend.Components.Base.Tables
@using Shared.Models.Entities
@using Radzen

<PageTitle>Categorías</PageTitle>

<PageWithCommandBar BackPath="/"
                    ShowNew
                    OnNewClick="@GoToCreate">

    <RadzenCard>
        <EntityTable T="Categoria" 
                     @ref="entityTable"
                     @key="@GetGridKey()"
                     ShowSearchBar="true"
                     ShowExcelExport="true"
                     ShowRefreshButton="true"
                     ShowAutoRefresh="true"
                     ShowColumnConfig="true"
                     ShowActions="true"
                     SearchPlaceholder="Buscar categorías..."
                     BaseQuery="@currentView.QueryBuilder"
                     ColumnConfigs="@currentView.ColumnConfigs"
                     ForceOrderByIndex="true"
                     EnableSelectOptimization="true"
                     SelectOnlyVisibleColumns="true"
                     ViewConfigurations="@ViewConfigurationsTyped"
                     CurrentView="@currentView"
                     OnViewChanged="@OnViewChanged"
                     ViewDisplayNameProperty="DisplayName"
                     CombineColumnsAndConfigs="true"
                     OnEdit="@HandleEdit"
                     OnDelete="@HandleDelete">
            
            <Columns>
                <RadzenDataGridColumn TItem="Categoria" Property="Active" Title="Estado" Width="120px" Sortable="true" Filterable="false">
                    <Template Context="categoria">
                        @if (categoria.Active)
                        {
                            <RadzenBadge BadgeStyle="BadgeStyle.Success" Text="Activo" />
                        }
                        else
                        {
                            <RadzenBadge BadgeStyle="BadgeStyle.Danger" Text="Inactivo" />
                        }
                    </Template>
                </RadzenDataGridColumn>
            </Columns>
        </EntityTable>
    </RadzenCard>

</PageWithCommandBar>

